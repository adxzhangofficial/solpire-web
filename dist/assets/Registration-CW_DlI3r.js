import{r as o,j as e}from"./index-BtX-c8-9.js";import{u as k,a as w,o as y,C as I,s as t,b as S,l as $}from"./schemas-BRlsMrax.js";const C="/assets/edit-icon-CnaL0Mfn.svg",F=y({username:t().min(3,"用户名至少需要3个字符").max(50,"用户名不能超过50个字符"),password:t().min(6,"密码至少需要6个字符").max(100,"密码不能超过100个字符"),phone:t().regex(/^1[3-9]\d{9}$/,"请输入有效的手机号码"),email:t().email("请输入有效的邮箱地址").optional().or($("")),interests:S(t()).min(1,"请至少选择一个兴趣"),otherInterest:t().optional(),nickname:t().min(2,"昵称至少需要2个字符").max(30,"昵称不能超过30个字符")}),O=()=>{const[d,m]=o.useState(!1),[h,x]=o.useState(!1),p=["咖啡因安全基础吧","汽车竞技与改装","极品分分游戏吧","游戏分兴趣爱吧","3D打印与超大入关吧","电子兴趣研究吧","艺术厂品创意研究兴趣吧"],{register:i,handleSubmit:u,control:j,watch:N,setValue:l,formState:{errors:s}}=k({resolver:w(F),defaultValues:{username:"",password:"",phone:"",email:"",interests:[],otherInterest:"",nickname:""}}),c=N("interests");o.useEffect(()=>(document.body.classList.add("registration-body"),()=>document.body.classList.remove("registration-body")),[]),o.useEffect(()=>{document.title="Solpire - 注册"},[]);const g=(a,r)=>{const n=c||[];r?l("interests",[...n,a]):l("interests",n.filter(v=>v!==a))},b=a=>{if(x(a),a){const r=c||[];r.includes("other")||l("interests",[...r,"other"])}else l("interests",(c||[]).filter(n=>n!=="other")),l("otherInterest","")},f=async a=>{m(!0);try{console.log("Registration data ready for API:",a),await new Promise(r=>setTimeout(r,1e3)),alert("注册成功！(API连接后将实现真正的注册)")}catch(r){console.error("Registration error:",r),alert("注册失败，请重试")}finally{m(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rg-page-bg"}),e.jsxs("div",{className:"page-container",children:[e.jsxs("div",{className:"header-section",children:[e.jsx("h1",{children:"Hello"}),e.jsx("h1",{children:"感谢注册"})]}),e.jsx("div",{className:"content-wrapper",children:e.jsxs("div",{className:"main-form-wrapper",children:[e.jsx("div",{className:"avatar-section"}),e.jsxs("div",{className:"form-wrapper",children:[e.jsxs("div",{className:"registration-container",children:[e.jsx("h2",{className:"registration-title",children:"账户注册"}),e.jsx("div",{className:"form-divider"}),e.jsxs("form",{id:"registrationForm",onSubmit:u(f),children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["用户名",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${s.username?"input-error":""}`,placeholder:"请输入用户名","data-testid":"input-username",...i("username")}),s.username&&e.jsx("span",{className:"error-message","data-testid":"error-username",children:s.username.message})]}),e.jsx("div",{className:"form-divider-light"}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["密码",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"password",className:`form-control ${s.password?"input-error":""}`,placeholder:"请输入密码","data-testid":"input-password",...i("password")}),s.password&&e.jsx("span",{className:"error-message","data-testid":"error-password",children:s.password.message})]}),e.jsx("div",{className:"form-divider-light"}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["电话",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"tel",className:`form-control ${s.phone?"input-error":""}`,placeholder:"请输入手机号码","data-testid":"input-phone",...i("phone")}),s.phone&&e.jsx("span",{className:"error-message","data-testid":"error-phone",children:s.phone.message})]}),e.jsx("div",{className:"form-divider-light"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"邮箱"}),e.jsx("input",{type:"email",className:`form-control ${s.email?"input-error":""}`,placeholder:"请输入邮箱地址（可选）","data-testid":"input-email",...i("email")}),s.email&&e.jsx("span",{className:"error-message","data-testid":"error-email",children:s.email.message})]}),e.jsx("div",{className:"form-divider-light"}),e.jsxs("div",{className:"interests-section",children:[e.jsxs("label",{className:"form-label",children:["您喜欢什么兴趣吧",e.jsx("span",{className:"required",children:"*"})]}),s.interests&&e.jsx("span",{className:"error-message","data-testid":"error-interests",children:s.interests.message}),e.jsx(I,{name:"interests",control:j,render:()=>e.jsx("div",{className:"checkbox-grid",children:p.map((a,r)=>e.jsxs("div",{className:"checkbox-item",children:[e.jsxs("div",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:`interest${r+1}`,checked:c?.includes(a)||!1,onChange:n=>g(a,n.target.checked),"data-testid":`checkbox-interest-${r}`}),e.jsx("span",{className:"checkmark"})]}),e.jsx("label",{className:"checkbox-label",htmlFor:`interest${r+1}`,children:a})]},r))})}),e.jsxs("div",{className:"other-section",children:[e.jsxs("div",{className:"checkbox-item",children:[e.jsxs("div",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"interestOther",checked:h,onChange:a=>b(a.target.checked),"data-testid":"checkbox-interest-other"}),e.jsx("span",{className:"checkmark"})]}),e.jsx("label",{className:"checkbox-label",htmlFor:"interestOther",children:"其他"})]}),h&&e.jsxs("div",{className:"other-textarea-wrapper",children:[e.jsx("textarea",{className:"other-textarea",placeholder:"请输入其他兴趣","data-testid":"textarea-other-interest",...i("otherInterest")}),e.jsx("img",{src:C,alt:"Edit",className:"textarea-edit-icon"})]})]})]}),e.jsx("div",{className:"form-divider-light"}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["您的昵称",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${s.nickname?"input-error":""}`,placeholder:"请输入昵称","data-testid":"input-nickname",...i("nickname")}),s.nickname&&e.jsx("span",{className:"error-message","data-testid":"error-nickname",children:s.nickname.message})]})]})]}),e.jsx("div",{className:"button-container",children:e.jsx("button",{type:"submit",className:"register-button",form:"registrationForm",disabled:d,"data-testid":"button-register-submit",children:d?"注册中...":"注册"})})]})]})})]})]})};export{O as Registration};
